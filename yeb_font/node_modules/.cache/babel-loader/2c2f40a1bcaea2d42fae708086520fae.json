{"remainingRequest":"D:\\qianduan\\h\\yeb\\node_modules\\thread-loader\\dist\\cjs.js!D:\\qianduan\\h\\yeb\\node_modules\\babel-loader\\lib\\index.js!D:\\qianduan\\h\\yeb\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\qianduan\\h\\yeb\\src\\utils\\menus.js","dependencies":[{"path":"D:\\qianduan\\h\\yeb\\src\\utils\\menus.js","mtime":1634038767584},{"path":"D:\\qianduan\\h\\yeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\qianduan\\h\\yeb\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\qianduan\\h\\yeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\qianduan\\h\\yeb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgeyBnZXRSZXF1ZXN0IH0gZnJvbSAnLi9hcGknOwpleHBvcnQgdmFyIGluaXRNZW51ID0gZnVuY3Rpb24gaW5pdE1lbnUocm91dGVyLCBzdG9yZSkgewogIGlmIChzdG9yZS5zdGF0ZS5yb3V0ZXMubGVuZ3RoID4gMCkgewogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtcmV0dXJuCiAgICByZXR1cm47CiAgfQoKICBnZXRSZXF1ZXN0KCcvc3lzdGVtL2NmZy9tZW51JykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgaWYgKGRhdGEpIHsKICAgICAgLy8g5qC85byP5YyWcm91dGVycwogICAgICBjb25zb2xlLmxvZyhkYXRhKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAoKICAgICAgdmFyIGZtdFJvdXRlcnMgPSBmb3JtYXRSb3V0ZXJzKGRhdGEpOyAvLyDmt7vliqDliLDot6/nlLHkuK0KICAgICAgLy8gICBmbXRSb3V0ZXJzID0gQXJyYXkuZnJvbShmbXRSb3V0ZXJzKQoKICAgICAgY29uc29sZS5sb2coJ+aOpeaUtuWIsOeahOWPguaVsOexu+Wei+S4uu+8micgKyBBcnJheS5pc0FycmF5KGZtdFJvdXRlcnMpKTsKICAgICAgcm91dGVyLmFkZFJvdXRlcyhmbXRSb3V0ZXJzKTsgLy8gICDlsIbmlbDmja7lrZjlhaVWdWV4CgogICAgICBjb25zb2xlLmxvZyhmbXRSb3V0ZXJzKTsKICAgICAgc3RvcmUuY29tbWl0KCdpbml0Um91dGVycycsIGZtdFJvdXRlcnMpOwogICAgfQogIH0pOwp9OwpleHBvcnQgdmFyIGZvcm1hdFJvdXRlcnMgPSBmdW5jdGlvbiBmb3JtYXRSb3V0ZXJzKHJvdXRlcykgewogIHZhciBmbVJvdXRlcnMgPSBbXTsgLy8gY29uc29sZS5sb2coJ+aOpeaUtuWIsOeahOWPguaVsOexu+Wei+S4uu+8micgKyBBcnJheS5pc0FycmF5KHJvdXRlcykpCgogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZXIpIHsKICAgIHZhciBwYXRoID0gcm91dGVyLnBhdGgsCiAgICAgICAgX2NvbXBvbmVudCA9IHJvdXRlci5jb21wb25lbnQsCiAgICAgICAgbmFtZSA9IHJvdXRlci5uYW1lLAogICAgICAgIGljb25DbHMgPSByb3V0ZXIuaWNvbkNscywKICAgICAgICBjaGlsZHJlbiA9IHJvdXRlci5jaGlsZHJlbjsKCiAgICBpZiAoY2hpbGRyZW4gJiYgY2hpbGRyZW4gaW5zdGFuY2VvZiBBcnJheSkgewogICAgICAvLyDpgJLlvZIKICAgICAgY2hpbGRyZW4gPSBmb3JtYXRSb3V0ZXJzKGNoaWxkcmVuKTsKICAgIH0KCiAgICB2YXIgZm9ybWF0Um91dGVyID0gewogICAgICBwYXRoOiBwYXRoLAogICAgICBuYW1lOiBuYW1lLAogICAgICBpY29uQ2xzOiBpY29uQ2xzLAogICAgICBjaGlsZHJlbjogY2hpbGRyZW4sCiAgICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KHJlc29sdmUpIHsKICAgICAgICBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdIb21lJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdFbXAnKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL2VtcC8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdQZXInKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL3Blci8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdTYWwnKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL3NhbC8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdTdGEnKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL3N0YS8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zdGFydHNXaXRoKCdTeXMnKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL3N5cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGZtUm91dGVycy5wdXNoKGZvcm1hdFJvdXRlcik7CiAgfSk7CiAgcmV0dXJuIGZtUm91dGVyczsKfTs="},{"version":3,"sources":["D:/qianduan/h/yeb/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routes","length","then","data","console","log","fmtRouters","formatRouters","Array","isArray","addRoutes","commit","fmRouters","forEach","path","component","name","iconCls","children","formatRouter","resolve","startsWith","require","push"],"mappings":"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","sourcesContent":["import { getRequest } from './api'\r\n\r\nexport const initMenu = (router, store) => {\r\n  if (store.state.routes.length > 0) {\r\n    // eslint-disable-next-line no-useless-return\r\n    return\r\n  }\r\n  getRequest('/system/cfg/menu').then(data => {\r\n    if (data) {\r\n    // 格式化routers\r\n      console.log(data)\r\n      // eslint-disable-next-line prefer-const\r\n      let fmtRouters = formatRouters(data)\r\n      // 添加到路由中\r\n      //   fmtRouters = Array.from(fmtRouters)\r\n      console.log('接收到的参数类型为：' + Array.isArray(fmtRouters))\r\n      router.addRoutes(fmtRouters)\r\n      //   将数据存入Vuex\r\n      console.log(fmtRouters)\r\n      store.commit('initRouters', fmtRouters)\r\n    }\r\n  })\r\n}\r\n\r\nexport const formatRouters = (routes) => {\r\n  const fmRouters = []\r\n  // console.log('接收到的参数类型为：' + Array.isArray(routes))\r\n  routes.forEach(router => {\r\n    let{\r\n      path,\r\n      component,\r\n      name,\r\n      iconCls,\r\n      children\r\n    } = router\r\n    if (children && children instanceof Array) {\r\n      // 递归\r\n      children = formatRouters(children)\r\n    }\r\n    const formatRouter = {\r\n      path: path,\r\n      name: name,\r\n      iconCls: iconCls,\r\n      children: children,\r\n      component (resolve) {\r\n        if (component.startsWith('Home')) {\r\n          require(['../views/' + component + '.vue'], resolve)\r\n        } else if (component.startsWith('Emp')) {\r\n          require(['../views/emp/' + component + '.vue'], resolve)\r\n        } else if (component.startsWith('Per')) {\r\n          require(['../views/per/' + component + '.vue'], resolve)\r\n        } else if (component.startsWith('Sal')) {\r\n          require(['../views/sal/' + component + '.vue'], resolve)\r\n        } else if (component.startsWith('Sta')) {\r\n          require(['../views/sta/' + component + '.vue'], resolve)\r\n        } else if (component.startsWith('Sys')) {\r\n          require(['../views/sys/' + component + '.vue'], resolve)\r\n        }\r\n      }\r\n    }\r\n    fmRouters.push(formatRouter)\r\n  })\r\n  return fmRouters\r\n}\r\n"]}]}