{"remainingRequest":"D:\\qianduan\\h\\yeb\\node_modules\\babel-loader\\lib\\index.js!D:\\qianduan\\h\\yeb\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\qianduan\\h\\yeb\\src\\utils\\menus.js","dependencies":[{"path":"D:\\qianduan\\h\\yeb\\src\\utils\\menus.js","mtime":1634027767930},{"path":"D:\\qianduan\\h\\yeb\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\qianduan\\h\\yeb\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\qianduan\\h\\yeb\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyBnZXRSZXF1ZXN0IH0gZnJvbSAnLi9hcGknOwpleHBvcnQgdmFyIGluaXRNZW51ID0gZnVuY3Rpb24gaW5pdE1lbnUocm91dGVyLCBzdG9yZSkgewogIGlmIChzdG9yZS5zdGF0ZS5yb3V0ZXJzLmxlbmd0aCA+IDApIHsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLXJldHVybgogICAgcmV0dXJuOwogIH0KCiAgZ2V0UmVxdWVzdCgnL3N5c3RlbS9jZmcvbWVudScpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgIGlmIChkYXRhKSB7CiAgICAgIC8vIOagvOW8j+WMlnJvdXRlcnMKICAgICAgY29uc29sZS5sb2coZGF0YSk7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItY29uc3QKCiAgICAgIHZhciBmbXRSb3V0ZXJzID0gZm9ybWF0Um91dGVycyhkYXRhKTsgLy8g5re75Yqg5Yiw6Lev55Sx5LitCgogICAgICByb3V0ZXIuYWRkUm91dGVzKGZtdFJvdXRlcnMpOyAvLyAgIOWwhuaVsOaNruWtmOWFpVZ1ZXgKCiAgICAgIGNvbnNvbGUubG9nKGZtdFJvdXRlcnMpOwogICAgICBzdG9yZS5jb21taXQoJ2luaXRSb3V0ZXJzJywgZm10Um91dGVycyk7CiAgICB9CiAgfSk7Cn07CmV4cG9ydCB2YXIgZm9ybWF0Um91dGVycyA9IGZ1bmN0aW9uIGZvcm1hdFJvdXRlcnMocm91dGVzKSB7CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1jb25zdAogIHZhciBmbVJvdXRlcnMgPSBbXTsKICBjb25zb2xlLmxvZygn5o6l5pS25Yiw55qE5Y+C5pWw5Li677yaJyArIEFycmF5LmlzQXJyYXkocm91dGVzKSk7CiAgcm91dGVzLmZvckVhY2goZnVuY3Rpb24gKHJvdXRlcikgewogICAgdmFyIHBhdGggPSByb3V0ZXIucGF0aCwKICAgICAgICBfY29tcG9uZW50ID0gcm91dGVyLmNvbXBvbmVudCwKICAgICAgICBuYW1lID0gcm91dGVyLm5hbWUsCiAgICAgICAgaWNvbkNscyA9IHJvdXRlci5pY29uQ2xzLAogICAgICAgIGNoaWxkcmVuID0gcm91dGVyLmNoaWxkcmVuOwoKICAgIGlmIChjaGlsZHJlbiAmJiBjaGlsZHJlbiBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgIC8vIOmAkuW9kgogICAgICBjaGlsZHJlbiA9IGZvcm1hdFJvdXRlcnMoY2hpbGRyZW4pOwogICAgfQoKICAgIHZhciBmb3JtYXRSb3V0ZXIgPSB7CiAgICAgIHBhdGg6IHBhdGgsCiAgICAgIG5hbWU6IG5hbWUsCiAgICAgIGljb25DbHM6IGljb25DbHMsCiAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbiwKICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQocmVzb2x2ZSkgewogICAgICAgIGlmIChfY29tcG9uZW50LnNhcnRzV2l0aCgnRW1wJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9lbXAvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc2FydHNXaXRoKCdQZXInKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL3Blci8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0gZWxzZSBpZiAoX2NvbXBvbmVudC5zYXJ0c1dpdGgoJ1NhbCcpKSB7CiAgICAgICAgICByZXF1aXJlKFsnLi4vdmlld3Mvc2FsLycgKyBfY29tcG9uZW50ICsgJy52dWUnXSwgcmVzb2x2ZSk7CiAgICAgICAgfSBlbHNlIGlmIChfY29tcG9uZW50LnNhcnRzV2l0aCgnU3RhJykpIHsKICAgICAgICAgIHJlcXVpcmUoWycuLi92aWV3cy9zdGEvJyArIF9jb21wb25lbnQgKyAnLnZ1ZSddLCByZXNvbHZlKTsKICAgICAgICB9IGVsc2UgaWYgKF9jb21wb25lbnQuc2FydHNXaXRoKCdTeXMnKSkgewogICAgICAgICAgcmVxdWlyZShbJy4uL3ZpZXdzL3N5cy8nICsgX2NvbXBvbmVudCArICcudnVlJ10sIHJlc29sdmUpOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICAgIGZtUm91dGVycy5wdXNoKGZvcm1hdFJvdXRlcik7CiAgfSk7CiAgcmV0dXJuIGZvcm1hdFJvdXRlcnM7Cn07"},{"version":3,"sources":["D:/qianduan/h/yeb/src/utils/menus.js"],"names":["getRequest","initMenu","router","store","state","routers","length","then","data","console","log","fmtRouters","formatRouters","addRoutes","commit","routes","fmRouters","Array","isArray","forEach","path","component","name","iconCls","children","formatRouter","resolve","sartsWith","require","push"],"mappings":"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","sourcesContent":["import { getRequest } from './api'\r\n\r\nexport const initMenu = (router, store) => {\r\n  if (store.state.routers.length > 0) {\r\n    // eslint-disable-next-line no-useless-return\r\n    return\r\n  }\r\n  getRequest('/system/cfg/menu').then(data => {\r\n    if (data) {\r\n    // 格式化routers\r\n      console.log(data)\r\n      // eslint-disable-next-line prefer-const\r\n      let fmtRouters = formatRouters(data)\r\n      // 添加到路由中\r\n      router.addRoutes(fmtRouters)\r\n      //   将数据存入Vuex\r\n      console.log(fmtRouters)\r\n      store.commit('initRouters', fmtRouters)\r\n    }\r\n  })\r\n}\r\n\r\nexport const formatRouters = (routes) => {\r\n  // eslint-disable-next-line prefer-const\r\n  let fmRouters = []\r\n  console.log('接收到的参数为：' + Array.isArray(routes))\r\n  routes.forEach(router => {\r\n    let{\r\n      path,\r\n      component,\r\n      name,\r\n      iconCls,\r\n      children\r\n    } = router\r\n    if (children && children instanceof Array) {\r\n      // 递归\r\n      children = formatRouters(children)\r\n    }\r\n    const formatRouter = {\r\n      path: path,\r\n      name: name,\r\n      iconCls: iconCls,\r\n      children: children,\r\n      component (resolve) {\r\n        if (component.sartsWith('Emp')) {\r\n          require(['../views/emp/' + component + '.vue'], resolve)\r\n        } else if (component.sartsWith('Per')) {\r\n          require(['../views/per/' + component + '.vue'], resolve)\r\n        } else if (component.sartsWith('Sal')) {\r\n          require(['../views/sal/' + component + '.vue'], resolve)\r\n        } else if (component.sartsWith('Sta')) {\r\n          require(['../views/sta/' + component + '.vue'], resolve)\r\n        } else if (component.sartsWith('Sys')) {\r\n          require(['../views/sys/' + component + '.vue'], resolve)\r\n        }\r\n      }\r\n    }\r\n    fmRouters.push(formatRouter)\r\n  })\r\n  return formatRouters\r\n}\r\n"]}]}